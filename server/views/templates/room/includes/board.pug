section(ng-controller="BoardController as boardvm")
  .row
    .board.col-xs-12
      pv-loading-spinner(ng-show="boardvm.loading")
      div(ng-if="!boardvm.isGameStarted")
        .alert.alert-info(role="alert")
          | Waiting for other players to join the room.<br>
          | Once the game is started new players <b>will not</b> be able to join.
        button.btn.btn-success.btn-block.btn-lg(type="button" ng-click="boardvm.startGame()") Start the game
      div(ng-if="boardvm.isGameStarted")
        .question-form(ng-show="boardvm.showQuestionForm")
          form(role="form" name="questionForm" ng-submit="boardvm.define(boardvm.question)")
            .form-group
              input.form-control.input-lg(type="text" placeholder="Type your yes/no question"
                  ng-model="boardvm.question")
            button.btn.btn-success.btn-block.btn-lg(type="submit") Define question
        .question-zone(ng-show="boardvm.showQuestion")
          .question
            p(ng-bind="boardvm.nextQuestion")
          .results
            .table-responsive
              table.table.table-condensed
                thead
                  tr
                    th Player
                    th Yes Count Guess
                    th OK
                tbody
                  tr(ng-repeat="player in vm.room.players" ng-class="{info: boardvm.hasAnswered(player.id)}")
                    th(scope="row" ng-bind="::player.username")
                    td(ng-bind="boardvm.results[player.id].yesCountGuess")
                    td(ng-bind="boardvm.results[player.id].correct")
        .player-recap(ng-show="boardvm.showPlayerRecap")
          span(ng-bind-template="Answer: {{::boardvm.answerRecap}} || Guess: {{::boardvm.yesCountGuessRecap}}")
        .answer-form(ng-show="boardvm.showAnswerForm")
          form(role="form" name="answerForm")
            .form-group
              select.form-control(name="yesCountGuess" ng-model="boardvm.yesCountGuess" required=""
                  ng-options="number for number in [] | pvRange:0:vm.room.players.length")
            .form-group
              button.btn.btn-lg(type="submit" ng-click="boardvm.answer('YES', boardvm.yesCountGuess)") YES
              button.btn.btn-lg(type="submit" ng-click="boardvm.answer('NO', boardvm.yesCountGuess)") NO
        button.btn.btn-success.btn-block.btn-lg(type="button" ng-show="boardvm.showNextTurn"
            ng-click="boardvm.startNextTurn()")
          | Start next turn
